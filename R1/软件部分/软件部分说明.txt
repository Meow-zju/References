软件部分

底层程序
我们选择使用Arduino作为下位机，有以下优点：
1. 上手简单，不需要过多设置
2. 编程简单
3. 可以直接使用USB连接电脑，同时完成单片机的供电，和上位机与下位机的通讯。

我们的机器人使用了2种不同的步进电机，分别用3种方式进行控制。
1. 底部4个控制万向轮的步进电机，使用tb6560模块控制。该模块共有三个输入端，分别为使能(EN)，方向(CW)，脉冲信号(clk)。一个方波周期，步进电机转动一定的度数。
2. 控制丝杆上升下降的步进电机，使用类似tb6560的模块，该模块同时提供了内部脉冲，当使用内部脉冲时，无需单片机提供脉冲，步进电机即可工作。
3. 控制收集槽拨板的步进电机，使用l298n模块控制，该模块有两个使能和四个脉冲。通过四个脉冲信号输入不同，实现正反转的控制。
以上的具体控制方法详见附录的程序。

除了步进电机之外还使用了舵机，我们的舵机只需要简单的转动至相应度数，所以直接使用了arduino自带的舵机库Servo.h进行控制。


上层程序
上层为了更快的识别速度，我们使用了电脑，同时更方便的实现了与单片机之间的通讯。
程序采用Arduino+OpenCV编写，具体识别思路为先判断当前物品是否是易拉罐，若不是，再判断是什么颜色的木块/书籍。
识别易拉罐使用了通用的surf特征识别算法，实现采集6种易拉罐的商标图片，在识别时一次判断当前场景和每个商标的相似程度，从而判断是哪一种易拉罐。
surf算法具体实现是，先用surf算法采集商标和摄像头拍摄的照片的特征点，进行匹配，再用Ransac算法去除没有用的野点，只保留内点，记录内点数量，若大雨阈值，则认为匹配。
判断颜色使用的是图像的HSV模式下的H通道，通过设定阈值，找到相应颜色的像素点，计算像素点占整张图的比例，判断是什么颜色。
具体实现可以参考程序代码。
